# Documenting Datasets

Documentation is critical for a self-service data platform. Dremio allows you to attach a Wiki (Markdown) and Tags to every dataset, source, space, and folder.

## Wikis

The Wiki is the first thing users see when they open a dataset in Dremio. It should provide context, ownership, and usage instructions.

### Updating Wikis Programmatically

You can automate documentation updates using `client.catalog.update_wiki`.

```python
# Get the dataset ID
dataset = client.catalog.get_entity_by_path("marketing.customer_360")
dataset_id = dataset['id']

# Define Wiki Content (Markdown)
wiki_content = """
# Customer 360

This view provides a holistic view of customer activity, aggregated at the user level.

## Key Metrics
- **Lifetime Value (LTV)**: Total revenue generated by the customer.
- **Total Orders**: Count of all completed orders.

## Usage
Use this view for:
- Churn analysis
- Segmentation
- Email marketing campaigns

## Owner
**Marketing Data Team** (marketing-data@example.com)
"""

# Get current wiki version (required for updates to avoid 409 Conflict)
try:
    current_wiki = client.catalog.get_wiki(dataset_id)
    version = current_wiki.get("version")
except Exception:
    version = None

# Update the Wiki
client.catalog.update_wiki(dataset_id, wiki_content, version=version)
```

> [!NOTE]
> When updating a Wiki, it is best practice to fetch the current version first and pass it to `update_wiki`. This prevents overwriting concurrent changes and avoids `409 Conflict` errors, which are common in Dremio Software.

### Retrieving Wiki Content

```python
wiki = client.catalog.get_wiki(dataset_id)
print(wiki.get("text"))
```

## Tagging

Tags help organize and discover datasets. You can use tags to indicate status, department, or project.

### Best Practices for Tags
- **Status**: `production`, `staging`, `deprecated`
- **Department**: `marketing`, `finance`, `engineering`
- **Compliance**: `pii`, `gdpr`, `hipaa`

### Managing Tags

```python
# Tag the dataset as 'certified' and 'production'
# Note: set_tags overwrites existing tags
client.catalog.set_tags(dataset_id, ["certified", "production", "marketing"])

# Retrieve tags to verify
tags = client.catalog.get_tags(dataset_id)
print(tags) # ['certified', 'production', 'marketing']
```
